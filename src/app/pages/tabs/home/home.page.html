<!-- <ion-content [fullscreen]="true" class="page-content tab-page-white"> -->
<ion-content
  [fullscreen]="true"
  class="page-content"
  [ngClass]="activeSegment === 'investments' ? 'investments' : ''"
>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="main-header">
    <div class="header-name">
      <div class="img-wrapper">
        <!-- <img src="" alt=""> -->
        <div class="default-img">MT</div>
      </div>
      <div class="name">
        <h3>Hi {{ user?.fullname.split(' ')[0] }},</h3>
        <p>Hope you're having a great {{ getTimeOfDay()}}.</p>
      </div>
    </div>

    <div class="rate">$1/N763</div>

    <!-- <ion-icon src="assets/icon/chat.svg"></ion-icon> -->
  </div>

  <ion-segment value="wallet" (ionChange)="segmentChanged($event)" mode="md">
    <ion-segment-button value="wallet" mode="md">
      <ion-label>Wallet</ion-label>
    </ion-segment-button>
    <ion-segment-button value="investments">
      <ion-label>Investments</ion-label>
    </ion-segment-button>
  </ion-segment>

  <!-- Wallet Segment... -->
  <div *ngIf="activeSegment === 'wallet'" class="segment segment-wallet">
    <div class="summary">
      <div class="summary-header">
        <div class="balance">
          <p>Wallet Balance</p>
          <h2 [ngClass]="!showBalance ? 'blur-text' : 'show-text'">$0.00</h2>
        </div>
        <div class="hidden-wrapper">
          <ion-icon
            [src]="'assets/icon/'+balanceIcon+'.svg'"
            (click)="hideShowBalance()"
          ></ion-icon>
        </div>
      </div>

      <ion-row>
        <ion-col>
          <div class="cta">
            <ion-icon src="assets/icon/v2-icons/deposit.svg"></ion-icon>
            <p>Deposit</p>
          </div>
        </ion-col>
        <ion-col>
          <div class="cta">
            <ion-icon src="assets/icon/v2-icons/withdraw.svg"></ion-icon>
            <p>Withdraw</p>
          </div>
        </ion-col>
        <ion-col>
          <div class="cta">
            <ion-icon src="assets/icon/v2-icons/transfer.svg"></ion-icon>
            <p>Transfer</p>
          </div>
        </ion-col>
      </ion-row>
    </div>

    <div class="quick-trans">
      <p class="section-title">Quick Transfer</p>

      <ion-row class="quick-transfer-wrapper">
        <ion-col size="3">
          <ion-icon
            class="add-quick"
            src="assets/icon/v2-icons/quick-add.svg"
          ></ion-icon>
        </ion-col>

        <ion-col size="4">
          <div class="quick-transfer-item">
            <div class="default-img">AJ</div>
            <p>Akim</p>
          </div>
        </ion-col>
        <ion-col size="4">
          <div class="quick-transfer-item">
            <div class="default-img">JM</div>
            <p>Janada</p>
          </div>
        </ion-col>
        <ion-col size="4">
          <div class="quick-transfer-item">
            <div class="default-img">IU</div>
            <p>Ibrahim</p>
          </div>
        </ion-col>
        <ion-col size="4">
          <div class="quick-transfer-item">
            <div class="default-img">AA</div>
            <p>Aisha</p>
          </div>
        </ion-col>

        <!-- <ion-col
          size="6"
          *ngFor="let inv of home?.user_details.subscriber.subscription"
          [ngClass]="{'alter-margin': home?.user_details.subscriber.subscription.length === 1}"
        >
          <div class="investment-item" (click)="goToInvestmentDeets(inv)">
            <p>Balance</p>
            <h4>
              <span *ngIf="showBalance"
                >${{ util.numberWithCommas(addInvBalances(inv)) }}</span
              ><span *ngIf="!showBalance" class="hidden">******</span>
            </h4>
            <div
              class="type-area {{ getIconForInvName(inv.subscription.name) || 'levadura-big' }}"
            >
              <ion-icon
                [src]="'assets/icon/inv-type/'+ (getIconForInvName(inv.subscription.name) || 'special-big') +'.svg'"
              ></ion-icon>
              <h4>
                {{ inv.subscription.name.substring(0,8)
                }}{{inv.subscription.name.length > 8 ? '...': ''}}
              </h4>
            </div>
          </div>
        </ion-col> -->
      </ion-row>
    </div>

    <div class="recent-trans">
      <p class="section-title">Recent Wallet Transactions</p>
      <p class="section-title">
        View all
        <ion-icon src="assets/icon/v2-icons/forward-green.svg"></ion-icon>
      </p>
    </div>

    <div class="transactions-list">
      <div class="transaction" (click)="openInfoModal('deposit', {})">
        <div class="trans-type-wrapper">
          <ion-icon src="assets/icon/v2-icons/trans-deposit.svg"></ion-icon>
          <div class="trans-type">
            <h3>Deposit</h3>
            <p class="trans-type-p">Bank Transfer</p>
          </div>
        </div>
        <div class="amount-date">
          <div
            class="amount"
            [ngClass]="!showBalance ? 'hide-text' : 'reveal-text'"
          >
            +$3,403.58
          </div>
          <div class="trans-date">16 June 2023</div>
        </div>
      </div>
      <div class="transaction">
        <div class="trans-type-wrapper">
          <ion-icon
            src="assets/icon/v2-icons/trans-transfer-user.svg"
          ></ion-icon>
          <div class="trans-type">
            <h3>Transfer</h3>
            <p class="trans-type-p">Wallet Transfer to Akim John</p>
          </div>
        </div>
        <div class="amount-date">
          <div
            class="amount"
            [ngClass]="!showBalance ? 'hide-text' : 'reveal-text'"
          >
            +$3,403.58
          </div>
          <div class="trans-date">16 June 2023</div>
        </div>
      </div>
      <div class="transaction">
        <div class="trans-type-wrapper">
          <ion-icon
            src="assets/icon/v2-icons/trans-transfer-plan.svg"
          ></ion-icon>
          <div class="trans-type">
            <h3>Transfer</h3>
            <p class="trans-type-p">Wallet Transfer to The Plan (Junzi)</p>
          </div>
        </div>
        <div class="amount-date">
          <div
            class="amount"
            [ngClass]="!showBalance ? 'hide-text' : 'reveal-text'"
          >
            +$3,403.58
          </div>
          <div class="trans-date">16 June 2023</div>
        </div>
      </div>
      <div class="transaction">
        <div class="trans-type-wrapper">
          <ion-icon src="assets/icon/v2-icons/trans-bonus.svg"></ion-icon>
          <div class="trans-type">
            <h3>Bonus</h3>
            <p class="trans-type-p">Referral Bonus</p>
          </div>
        </div>
        <div class="amount-date">
          <div
            class="amount"
            [ngClass]="!showBalance ? 'hide-text' : 'reveal-text'"
          >
            +$3,403.58
          </div>
          <div class="trans-date">16 June 2023</div>
        </div>
      </div>
      <div class="transaction">
        <div class="trans-type-wrapper">
          <ion-icon src="assets/icon/v2-icons/trans-withdraw.svg"></ion-icon>
          <div class="trans-type">
            <h3>Withdrawal</h3>
            <p class="trans-type-p">To Bank Account</p>
          </div>
        </div>
        <div class="amount-date">
          <div
            class="amount"
            [ngClass]="!showBalance ? 'hide-text' : 'reveal-text'"
          >
            +$3,403.58
          </div>
          <div class="trans-date">16 June 2023</div>
        </div>
      </div>
    </div>

    <!-- <div class="no-transactions">
      <img src="assets/imgs/cacti.svg" />
      <p>It's a bit empty here because you haven't made any transaction yet.</p>
      <div class="quick-btn-round">Deposit Now</div>
    </div>

    <div class="finish-kyc">
      <div
        class="progress"
        [style]="'background: radial-gradient(closest-side, white 79%, transparent 80% 100%), conic-gradient(var(--ion-color-primary) '+ percent +'%, rgba(var(--ion-color-secondary-rgb), 0.2) 0)'"
      >
        {{percent}}%
      </div>
      <div class="text">
        <p>Finish setting up your account</p>
        <p>Complete your KYC to get full access to Kwakol Funds</p>
      </div>
    </div> -->
  </div>
  <!-- End Wallet Segment -->

  <!-- Investments Segment... -->
  <div
    *ngIf="activeSegment === 'investments'"
    class="segment segment-investments"
  >
    <!-- <div class="summary2">
      <img src="assets/icon/text-svgs/total-funds.svg">
      <h2><span *ngIf="showBalance">${{ homeBalance }}</span><span *ngIf="!showBalance" class="hidden">******</span></h2>
      <ion-icon src="assets/icon/home-deposit.svg" (click)="goToPage('/deposit')"></ion-icon>
      <ion-icon src="assets/icon/home-withdraw.svg" (click)="goToPage('/withdrawal')"></ion-icon>
    </div> -->

    <div class="segment-head">
      <div class="quick-summary">
        <p class="title">
          Total Investments
          <ion-icon
            [src]="'assets/icon/v2-icons/'+balanceIcon+'-green.svg'"
            (click)="hideShowBalance()"
          ></ion-icon>
        </p>

        <h3 [ngClass]="!showBalance ? 'blur-text green' : 'show-text'">
          ${{ homeBalance }}
        </h3>

        <div class="cta-wrapper">
          <div class="cta">
            <div class="btn">
              <ion-icon src="assets/icon/v2-icons/cta-deposit.svg"></ion-icon>
            </div>
            <p>Deposit</p>
          </div>
          <div class="cta">
            <div class="btn">
              <ion-icon src="assets/icon/v2-icons/cta-withdraw.svg"></ion-icon>
            </div>
            <p>Withdraw</p>
          </div>
          <div class="cta">
            <div class="btn">
              <ion-icon src="assets/icon/v2-icons/cta-more.svg"></ion-icon>
            </div>
            <p>More</p>
          </div>
        </div>
      </div>

      <ion-row class="investments-wrapper">
        <ion-col size="2">
          <div class="add-investment-wrapper">
            <div class="add-investment" (click)="goToNewAccount()">
              <ion-icon src="assets/icon/v2-icons/add-green.svg"></ion-icon>
            </div>
          </div>
        </ion-col>

        <ion-col
          size="5"
          *ngFor="let inv of home?.user_details.subscriber.subscription"
          [ngClass]="{'alter-margin': home?.user_details.subscriber.subscription.length === 1}"
        >
          <div class="investment-item" (click)="goToInvestmentDeets(inv)">
            <div
              class="type-area {{ getIconForInvName(inv.subscription.name) || 'levadura-big' }}"
            >
              <div class="icon-wrapper">
                <ion-icon
                  [src]="'assets/icon/inv-type/'+ (getIconForInvName(inv.subscription.name) || 'special-big') +'.svg'"
                ></ion-icon>
              </div>
              <h4>
                <span>The Plan</span><br />
                <span>
                  {{ inv.subscription.name.substring(0,8)
                  }}{{inv.subscription.name.length > 8 ? '...': ''}}
                </span>
              </h4>
            </div>
            <p>Balance</p>
            <h4>
              <span
                class="balance"
                [ngClass]="!showBalance ? 'blur-text green' : 'show-text regular'"
                >${{ util.numberWithCommas(addInvBalances(inv)) }}</span
              >
              <!-- <span *ngIf="!showBalance" class="hidden">******</span> -->
            </h4>
          </div>
        </ion-col>
        <ion-col
          size="5"
          *ngFor="let inv of home?.user_details.subscriber.subscription"
          [ngClass]="{'alter-margin': home?.user_details.subscriber.subscription.length === 1}"
        >
          <div class="investment-item" (click)="goToInvestmentDeets(inv)">
            <div
              class="type-area {{ getIconForInvName(inv.subscription.name) || 'levadura-big' }}"
            >
              <div class="icon-wrapper">
                <ion-icon
                  [src]="'assets/icon/inv-type/'+ (getIconForInvName(inv.subscription.name) || 'special-big') +'.svg'"
                ></ion-icon>
              </div>
              <h4>
                <span>The Plan</span><br />
                <span>
                  {{ inv.subscription.name.substring(0,8)
                  }}{{inv.subscription.name.length > 8 ? '...': ''}}
                </span>
              </h4>
            </div>
            <p>Balance</p>
            <h4>
              <span
                class="balance"
                [ngClass]="!showBalance ? 'blur-text green' : 'show-text regular'"
                >${{ util.numberWithCommas(addInvBalances(inv)) }}</span
              >
              <!-- <span *ngIf="!showBalance" class="hidden">******</span> -->
            </h4>
          </div>
        </ion-col>
        <ion-col
          size="5"
          *ngFor="let inv of home?.user_details.subscriber.subscription"
          [ngClass]="{'alter-margin': home?.user_details.subscriber.subscription.length === 1}"
        >
          <div class="investment-item" (click)="goToInvestmentDeets(inv)">
            <div
              class="type-area {{ getIconForInvName(inv.subscription.name) || 'levadura-big' }}"
            >
              <div class="icon-wrapper">
                <ion-icon
                  [src]="'assets/icon/inv-type/'+ (getIconForInvName(inv.subscription.name) || 'special-big') +'.svg'"
                ></ion-icon>
              </div>
              <h4>
                <span>The Plan</span><br />
                <span>
                  {{ inv.subscription.name.substring(0,8)
                  }}{{inv.subscription.name.length > 8 ? '...': ''}}
                </span>
              </h4>
            </div>
            <p>Balance</p>
            <h4>
              <span
                class="balance"
                [ngClass]="!showBalance ? 'blur-text green' : 'show-text regular'"
                >${{ util.numberWithCommas(addInvBalances(inv)) }}</span
              >
              <!-- <span *ngIf="!showBalance" class="hidden">******</span> -->
            </h4>
          </div>
        </ion-col>

        <ion-col
          size="5"
          *ngFor="let inv of home?.user_details.subscriber.subscription"
          [ngClass]="{'alter-margin': home?.user_details.subscriber.subscription.length === 1}"
        >
          <div class="investment-item" (click)="goToInvestmentDeets(inv)">
            <div
              class="type-area {{ getIconForInvName(inv.subscription.name) || 'levadura-big' }}"
            >
              <div class="icon-wrapper">
                <ion-icon
                  [src]="'assets/icon/inv-type/'+ (getIconForInvName(inv.subscription.name) || 'special-big') +'.svg'"
                ></ion-icon>
              </div>
              <h4>
                <span>The Plan</span><br />
                <span>
                  {{ inv.subscription.name.substring(0,8)
                  }}{{inv.subscription.name.length > 8 ? '...': ''}}
                </span>
              </h4>
            </div>
            <p>Balance</p>
            <h4>
              <span
                class="balance"
                [ngClass]="!showBalance ? 'blur-text green' : 'show-text regular'"
                >${{ util.numberWithCommas(addInvBalances(inv)) }}</span
              >
              <!-- <span *ngIf="!showBalance" class="hidden">******</span> -->
            </h4>
          </div>
        </ion-col>

        <ion-col size="5" *ngIf="!home" class="inv-skeleton">
          <ion-item>
            <ion-thumbnail slot="start">
              <ion-skeleton-text animated></ion-skeleton-text>
            </ion-thumbnail>
          </ion-item>
        </ion-col>

        <ion-col size="6" *ngIf="!home" class="inv-skeleton">
          <ion-item>
            <ion-thumbnail slot="start">
              <ion-skeleton-text animated></ion-skeleton-text>
            </ion-thumbnail>
          </ion-item>
        </ion-col>

        <!-- <ion-col size="6">
          <div class="investment-item">
            <p>Balance</p>
            <h4>$7,534.59</h4>
            <div class="type-area marigold-big">
              <ion-icon src="assets/icon/inv-type/marigold.svg"></ion-icon>
              <h4>Marigold</h4>
            </div>
          </div>
        </ion-col>
        <ion-col size="6">
          <div class="investment-item">
            <p>Balance</p>
            <h4>$1,255.49</h4>
            <div class="type-area levadura-big">
              <ion-icon src="assets/icon/inv-type/levadura.svg"></ion-icon>
              <h4>Levadura</h4>
            </div>
          </div>
        </ion-col> -->
      </ion-row>
    </div>

    <div class="list-wrapper">

      <div class="recent-trans">
        <p class="section-title">Transaction History</p>
        <p class="section-title">
          View all
          <ion-icon src="assets/icon/v2-icons/forward-green.svg"></ion-icon>
        </p>
      </div>

      <div class="transactions-list no-border">
        <div class="transaction" *ngFor="let hist of homeHistories | slice:0:4">
          <div class="trans-type-wrapper">
            <ion-icon
              [src]="'assets/icon/v2-icons/'+getIconForType(hist.type)+'.svg'"
            ></ion-icon>
            <div class="trans-type">
              <h3>
                {{ hist.type | capitalize }}
              </h3>
              <p class="trans-type-p">First (Levadura)</p>
            </div>
          </div>
          <div class="amount-date">
            <div
              class="amount"
              [ngClass]="!showBalance ? 'hide-text' : 'reveal-text'"
            >
            ${{ util.numberWithCommas(hist.amount) }}
            </div>
            <div class="trans-date">16 June 2023</div>
          </div>
          <!-- <p (click)="goToHistorySummary(hist)">
            {{ hist.date }}<span *ngIf="hist.type === 'profit'"
              >{{ hist.percentage || 0}}%</span
            >
          </p> -->
        </div>
      </div>

      <p
        class="no-histories"
        *ngIf="home && home?.user_details.transactions <= 0"
      >
        No history available...
      </p>

      <div class="tt-skeletons" *ngIf="!home">
        <ion-item *ngFor="let f of [1,2,3,4]">
          <ion-avatar slot="start">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-avatar>
          <ion-label>
            <h3>
              <ion-skeleton-text
                class="left"
                animated
                style="width: 25%"
              ></ion-skeleton-text>
              <ion-skeleton-text
                class="right"
                animated
                style="width: 15%"
              ></ion-skeleton-text>
            </h3>
          </ion-label>
        </ion-item>
      </div>
    </div>
  </div>

  <!-- Info Modal Begin -->
  <div
    #InfoModalDiv
    class="info-modal reset animate__animated animate__slideInUp"
    *ngIf="showInfoModal"
  >
    <div class="header">
      <ion-icon [src]="'assets/icon/v2-icons/'+ infoModalData.icon"></ion-icon>
      <h4>{{infoModalData.title}}</h4>
    </div>

    <div class="content">
      <p class="item" *ngFor="let item of infoModalData.content">
        <span>{{item.item}}</span>
        <span>{{item.value}}</span>
      </p>
    </div>

    <div class="footer">
      <div class="amount-date">
        <div class="amount">-${{infoModalData.amount}}</div>
        <div class="date">{{infoModalData.date}}</div>
      </div>
      <div class="round-button" (click)="closeInfoModal()">
        <ion-icon src="assets/icon/close.svg"></ion-icon>
      </div>
    </div>
  </div>
  <!-- Info Modal End -->

  <!-- <div class="backdrop"></div> -->
</ion-content>
