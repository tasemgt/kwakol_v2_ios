<ion-content [fullscreen]="true" class="page-content tab-page-white">

  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="header">
    <h3>Hi {{ user?.fullname.split(' ')[0] }},</h3>
    <p>Hope you're having a great {{ getTimeOfDay()}}.</p>
    <!-- <ion-icon src="assets/icon/chat.svg"></ion-icon> -->
  </div>

  <div class="summary">
    <img src="assets/icon/text-svgs/total-funds.svg">
    <h2>${{ homeBalance }}</h2>
    <ion-icon src="assets/icon/home-deposit.svg" (click)="goToPage('/deposit')"></ion-icon>
    <ion-icon src="assets/icon/home-withdraw.svg" (click)="goToPage('/withdrawal')"></ion-icon>
  </div>

  <p class="my-portfolio">My Portfolio <span (click)="goToNewAccount()"><ion-icon src="assets/icon/plus.svg"></ion-icon>Add Investment Account</span></p>

  <ion-row class="investments-wrapper">
    <ion-col size="3">
      <div class="add-investment" (click)="goToNewAccount()">
        Add Account
      </div>
    </ion-col>
    <ion-col size="6" *ngFor="let inv of home?.user_details.subscriber.subscription" [ngClass]="{'alter-margin': home?.user_details.subscriber.subscription.length === 1}">
      <div class="investment-item" (click)="goToInvestmentDeets(inv)">
        <p>Balance</p>
        <h4>${{ util.numberWithCommas(addInvBalances(inv)) }}</h4>
        <div class="type-area {{ getIconForInvName(inv.subscription.name) }}">
          <ion-icon [src]="'assets/icon/inv-type/'+ getIconForInvName(inv.subscription.name) +'.svg'"></ion-icon>
          <h4>{{ inv.subscription.name }}</h4>
        </div>
      </div>
    </ion-col>

    <ion-col size="6" *ngIf="!home" class="inv-skeleton">
      <ion-item>
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
      </ion-item>
    </ion-col>

    <ion-col size="6" *ngIf="!home" class="inv-skeleton">
      <ion-item>
        <ion-thumbnail slot="start">
          <ion-skeleton-text animated></ion-skeleton-text>
        </ion-thumbnail>
      </ion-item>
    </ion-col>


    <!-- <ion-col size="6">
      <div class="investment-item">
        <p>Balance</p>
        <h4>$7,534.59</h4>
        <div class="type-area marigold-big">
          <ion-icon src="assets/icon/inv-type/marigold.svg"></ion-icon>
          <h4>Marigold</h4>
        </div>
      </div>
    </ion-col>
    <ion-col size="6">
      <div class="investment-item">
        <p>Balance</p>
        <h4>$1,255.49</h4>
        <div class="type-area levadura-big">
          <ion-icon src="assets/icon/inv-type/levadura.svg"></ion-icon>
          <h4>Levadura</h4>
        </div>
      </div>
    </ion-col> -->
  </ion-row>

  <p class="account-history">Account History <span [routerLink]="'/tabs/history'">View All</span></p>

  <div class="history-list">
    <div class="history" *ngFor="let hist of home?.user_details.transactions | slice:0:4">
      <ion-icon [src]="'assets/icon/history/'+getIconForType(hist.type)+'.svg'"></ion-icon>
      <h4>
        {{ hist.type | capitalize }} 
        <span class="{{ hist.type }}">
          ${{ util.numberWithCommas(hist.amount) }}
        </span>
      </h4>
      <p (click)="goToHistorySummary(hist)">{{ hist.date }}<span *ngIf="hist.type === 'profit'">{{ hist.percentage || 0}}%</span></p>
    </div>
  </div>

  <p class="no-histories" *ngIf="home && home?.user_details.transactions <= 0">No history available...</p>

  <div class="tt-skeletons" *ngIf="!home">
    <ion-item *ngFor="let f of [1,2,3,4]">
      <ion-avatar slot="start">
        <ion-skeleton-text animated></ion-skeleton-text>
      </ion-avatar>
      <ion-label>
        <h3>
          <ion-skeleton-text class="left" animated style="width: 25%"></ion-skeleton-text>
          <ion-skeleton-text class="right" animated style="width: 15%"></ion-skeleton-text>
        </h3>
      </ion-label>
    </ion-item>
  </div>

</ion-content>
